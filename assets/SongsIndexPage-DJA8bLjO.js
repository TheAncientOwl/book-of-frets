import{j as e,X as b,T as m,B as n,S as j,I as f,F as c,H as h,O as v,P as C,z as y,E as k,G as S,N as w,R as I,w as T}from"./chakra-DI_L6RO5.js";import{c as B}from"./index-BjAsim89.js";import{u as p,a as L,b as P,s as z}from"./index-BYEEWJ_u.js";import{i as G,r as l}from"./react-Cp0hs61s.js";import{T as R,a as W,b as $}from"./react-icons-5XG6xgYY.js";import"./react-virtualized-Dik8BRzx.js";const E={acoustic:e.jsx($,{}),electric:e.jsx(W,{})},F=o=>{const{songCard:r}=p(),x=G(),{chordsIndex:t,songsHistory:d}=L(),[u,g]=l.useState(!1);return e.jsxs(b,{gridTemplateColumns:["26px 90px 1000fr 1fr","26px 100px 1000fr 1fr"],columns:{base:3},cursor:"pointer",borderStyle:"solid",borderWidth:"1px",padding:["8px"],position:"relative",onClick:()=>{d.set?.(P({title:o.title,artists:o.artists,directory:o.directory},d.value)),x(`/${o.directory}`)},backgroundColor:r.background,borderColor:r.border,_hover:{backgroundColor:r.hover.background},children:[e.jsxs(m,{fontWeight:"bold",fontSize:["md"],alignContent:"center",textAlign:"center",color:r.text.number,children:[o.index,"."]}),e.jsxs(n,{justifySelf:"center",position:"relative",width:["70px","80px"],height:["70px","80px"],borderRadius:"10px",overflow:"hidden",cursor:"pointer",children:[e.jsx(j,{isLoaded:u,width:"100%",height:"100%",borderRadius:"10px",children:e.jsx(f,{src:`/songs/${o.directory}/cover.webp`,alt:`${o.title} cover`,width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px",borderStyle:"solid",borderWidth:"3px",onLoad:()=>g(!0),borderColor:r.cover.border})}),e.jsx(c,{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",justifyContent:"center",alignItems:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(n,{width:["30px"],height:["30px"],borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:r.cover.hover.play.background,children:e.jsx(n,{as:"span",ml:"2px",width:0,height:0,borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderLeft:`10px solid ${r.cover.hover.play.text}`})})})]}),e.jsxs(n,{pt:"5px",children:[e.jsx(h,{noOfLines:1,as:"h1",size:["sm","md"],mb:["5px"],color:r.text.title,children:o.title}),e.jsx(h,{noOfLines:1,as:"h2",size:["xs","sm"],mb:["5px"],fontStyle:"italic",color:r.text.authors,children:o.artists.map((s,a)=>e.jsxs(n,{as:"span",children:[s," ",a<o.artists.length-1&&", "]},a))}),e.jsx(c,{color:r.text.typeTags,children:o.type.map((s,a)=>e.jsx(l.Fragment,{children:e.jsx(v,{label:s,children:E[s]})},a))})]}),e.jsx(c,{direction:"column",justifyContent:"center",alignItems:"center",children:e.jsxs(C,{children:[e.jsx(y,{children:e.jsx(n,{mr:["10px"],zIndex:2,"aria-label":"More about the song",onClick:s=>s.stopPropagation(),fontSize:"20px",padding:"5px",color:r.chords.pick,children:e.jsx(R,{})})}),e.jsxs(k,{backgroundColor:r.chords.popover.background,borderColor:r.chords.popover.border,children:[e.jsx(S,{backgroundColor:r.chords.popover.arrow}),e.jsx(w,{children:e.jsx(c,{gap:"5px",wrap:"wrap",children:o.chordIDs.map(s=>{const a=t[s];return console.assert(a!==void 0,`Could not find chord config for ${s}`),e.jsx(I,{size:["sm","md"],borderStyle:"solid",borderWidth:"thin",justifyContent:"center",backgroundColor:r.chords.popover.tag.background,borderColor:r.chords.popover.tag.border,color:r.chords.popover.tag.text,children:t[s].name},s)})})})]})]})})]})},i=B(),K=()=>{const{songsIndexPage:o}=p();l.useLayoutEffect(()=>z(o.background),[o.background]);const[r,x]=l.useState([]);return l.useEffect(()=>{fetch("/songs/index.json").then(t=>t.json()).then(t=>x(t.index)).catch(t=>{console.error("Failed to fetch songs index:",t)})},[]),e.jsx(T,{maxW:["100vw","xl"],height:"100%",display:"flex",flexDirection:"column",padding:["1em 0em 0.2em 0em","1em"],borderRadius:["0em","0.5em"],background:o.background,children:e.jsxs(i.Wrapper,{context:i.context,setup:{data:r,getKey:t=>t.title+" "+t.artists.join(" ")},children:[e.jsx(c,{justifyContent:"center",mx:"auto",mb:"20px",width:["250px","300px","400px"],children:e.jsx(i.SearchBar,{useContext:i.context.use,backgroundColor:o.searchBar.background,color:o.searchBar.color,borderColor:o.searchBar.border,_focus:{borderColor:o.searchBar.focusBorder}})}),e.jsx(n,{flex:"1",overflowY:"scroll",sx:{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},children:e.jsx(i.Content,{virtualized:!0,useContext:i.context.use,render:(t,d)=>e.jsx(F,{index:d+1,...t},d)})})]})})};export{K as SongsIndexPage,K as default};
