import{j as e,W as g,p as b,B as n,S as m,I as j,F as d,H as p,K as f,P as C,x as v,y,z as k,J as S,Q as w,s as I}from"./chakra-Bq1Nr9q_.js";import{i as T,r as c}from"./react-JcwzpOCy.js";import{c as B}from"./index-DZ6hjhvP.js";import{T as L,G as P,a as z}from"./react-icons-B_2PoyMT.js";import{u as h,a as W,s as G}from"./index-8HvFEv-9.js";import"./react-virtualized-BW4MdTGE.js";const $={acoustic:e.jsx(z,{}),electric:e.jsx(P,{})},F=r=>{const{songCard:o}=h(),x=T(),{chordsIndex:t}=W(),[l,u]=c.useState(!1);return e.jsxs(g,{gridTemplateColumns:["26px 90px 1000fr 1fr","26px 100px 1000fr 1fr"],columns:{base:3},cursor:"pointer",borderStyle:"solid",borderWidth:"1px",padding:["8px"],position:"relative",onClick:()=>x(`/${r.directory}`),backgroundColor:o.background,borderColor:o.border,_hover:{backgroundColor:o.hover.background},children:[e.jsxs(b,{fontWeight:"bold",fontSize:["md"],alignContent:"center",textAlign:"center",color:o.text.number,children:[r.index,"."]}),e.jsxs(n,{justifySelf:"center",position:"relative",width:["70px","80px"],height:["70px","80px"],borderRadius:"10px",overflow:"hidden",cursor:"pointer",children:[e.jsx(m,{isLoaded:l,width:"100%",height:"100%",borderRadius:"10px",children:e.jsx(j,{src:`/songs/${r.directory}/cover.webp`,alt:`${r.title} cover`,width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px",borderStyle:"solid",borderWidth:"3px",onLoad:()=>u(!0),borderColor:o.cover.border})}),e.jsx(d,{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",justifyContent:"center",alignItems:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(n,{width:["30px"],height:["30px"],borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:o.cover.hover.play.background,children:e.jsx(n,{as:"span",ml:"2px",width:0,height:0,borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderLeft:`10px solid ${o.cover.hover.play.text}`})})})]}),e.jsxs(n,{pt:"5px",children:[e.jsx(p,{noOfLines:1,as:"h1",size:["sm","md"],mb:["5px"],color:o.text.title,children:r.title}),e.jsx(p,{noOfLines:1,as:"h2",size:["xs","sm"],mb:["5px"],fontStyle:"italic",color:o.text.authors,children:r.artists.map((s,a)=>e.jsxs(n,{as:"span",children:[s," ",a<r.artists.length-1&&", "]},a))}),e.jsx(d,{color:o.text.typeTags,children:r.type.map((s,a)=>e.jsx(c.Fragment,{children:e.jsx(f,{label:s,children:$[s]})},a))})]}),e.jsx(d,{direction:"column",justifyContent:"center",alignItems:"center",children:e.jsxs(C,{children:[e.jsx(v,{children:e.jsx(n,{mr:["10px"],zIndex:2,"aria-label":"More about the song",onClick:s=>s.stopPropagation(),fontSize:"20px",padding:"5px",color:o.chords.pick,children:e.jsx(L,{})})}),e.jsxs(y,{backgroundColor:o.chords.popover.background,borderColor:o.chords.popover.border,children:[e.jsx(k,{backgroundColor:o.chords.popover.arrow}),e.jsx(S,{children:e.jsx(d,{gap:"5px",wrap:"wrap",children:r.chordIDs.map(s=>{const a=t[s];return console.assert(a!==void 0,`Could not find chord config for ${s}`),e.jsx(w,{size:["sm","md"],borderStyle:"solid",borderWidth:"thin",justifyContent:"center",backgroundColor:o.chords.popover.tag.background,borderColor:o.chords.popover.tag.border,color:o.chords.popover.tag.text,children:t[s].name},s)})})})]})]})})]})},i=B(),_=()=>{const{songsIndexPage:r}=h();c.useLayoutEffect(()=>G(r.background),[r.background]);const[o,x]=c.useState([]);return c.useEffect(()=>{fetch("/songs/index.json").then(t=>t.json()).then(t=>x(t.index)).catch(t=>{console.error("Failed to fetch songs index:",t)})},[]),e.jsx(I,{maxW:["100vw","xl"],height:"100%",display:"flex",flexDirection:"column",padding:["1em 0em 0.2em 0em","1em"],borderRadius:["0em","0.5em"],background:r.background,children:e.jsxs(i.Wrapper,{context:i.context,setup:{data:o,getKey:t=>t.title+" "+t.artists.join(" ")},children:[e.jsx(d,{justifyContent:"center",mx:"auto",mb:"20px",width:["250px","300px","400px"],children:e.jsx(i.SearchBar,{useContext:i.context.use,backgroundColor:r.searchBar.background,color:r.searchBar.color,borderColor:r.searchBar.border,_focus:{borderColor:r.searchBar.focusBorder}})}),e.jsx(n,{flex:"1",overflowY:"scroll",sx:{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},children:e.jsx(i.Content,{virtualized:!0,useContext:i.context.use,render:(t,l)=>e.jsx(F,{index:l+1,...t},l)})})]})})};export{_ as SongsIndexPage,_ as default};
