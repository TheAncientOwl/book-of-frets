import{j as e,X as m,T as f,B as n,S as j,I as y,F as c,H as h,O as v,P as C,z as k,E as w,G as S,N as T,R as I,w as $}from"./chakra-DI_L6RO5.js";import{c as B}from"./index-VzOwBItr.js";import{u,a as L,b as P,s as z}from"./index-Bu7rfUx4.js";import{i as F,r as l}from"./react-Cp0hs61s.js";import{T as G,a as R,b as W}from"./react-icons-5XG6xgYY.js";import"./react-virtualized-Dik8BRzx.js";const E={acoustic:e.jsx(W,{}),electric:e.jsx(R,{})},g=10,H=o=>{const{songCard:r}=u(),x=F(),{chordsIndex:t,songsHistory:d}=L(),[p,b]=l.useState(!1);return e.jsxs(m,{gridTemplateColumns:["26px 90px 1000fr 1fr","26px 100px 1000fr 1fr"],columns:{base:3},cursor:"pointer",borderStyle:"solid",borderWidth:"1px",padding:["8px"],position:"relative",onClick:()=>{d.set?.(P({title:o.title,artists:o.artists,directory:o.directory},d.value)),x(`/${o.directory}`)},backgroundColor:r.background,borderColor:r.border,_hover:{backgroundColor:r.hover.background},children:[e.jsxs(f,{fontWeight:"bold",fontSize:["md"],alignContent:"center",textAlign:"center",color:r.text.number,children:[o.index,"."]}),e.jsxs(n,{justifySelf:"center",position:"relative",width:["70px","80px"],height:["70px","80px"],borderRadius:"10px",overflow:"hidden",cursor:"pointer",children:[e.jsx(j,{isLoaded:p,width:"100%",height:"100%",borderRadius:"10px",children:e.jsx(y,{src:`/songs/${o.directory}/cover-192x192.webp`,srcSet:`
              /songs/${o.directory}/cover-64x64.webp   64w,
              /songs/${o.directory}/cover-128x128.webp 128w,
              /songs/${o.directory}/cover-192x192.webp 192w`,fetchPriority:o.index<=g?"high":"auto",loading:o.index<=g?"eager":"lazy",alt:`${o.title} cover`,width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px",borderStyle:"solid",borderWidth:"3px",onLoad:()=>b(!0),borderColor:r.cover.border})}),e.jsx(c,{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",justifyContent:"center",alignItems:"center",opacity:0,transition:"opacity 0.2s",_hover:{opacity:1},children:e.jsx(n,{width:["30px"],height:["30px"],borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:r.cover.hover.play.background,children:e.jsx(n,{as:"span",ml:"2px",width:0,height:0,borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderLeft:`10px solid ${r.cover.hover.play.text}`})})})]}),e.jsxs(n,{pt:"5px",children:[e.jsx(h,{noOfLines:1,as:"h1",size:["sm","md"],mb:["5px"],color:r.text.title,children:o.title}),e.jsx(h,{noOfLines:1,as:"h2",size:["xs","sm"],mb:["5px"],fontStyle:"italic",color:r.text.authors,children:o.artists.map((s,i)=>e.jsxs(n,{as:"span",children:[s," ",i<o.artists.length-1&&", "]},i))}),e.jsx(c,{color:r.text.typeTags,children:o.type.map((s,i)=>e.jsx(l.Fragment,{children:e.jsx(v,{label:s,children:E[s]})},i))})]}),e.jsx(c,{direction:"column",justifyContent:"center",alignItems:"center",children:e.jsxs(C,{isLazy:!0,children:[e.jsx(k,{children:e.jsx(n,{zIndex:2,as:"button","aria-label":"More about the song",onClick:s=>s.stopPropagation(),mr:["10px"],fontSize:"20px",padding:"5px",color:r.chords.pick,children:e.jsx(G,{})})}),e.jsxs(w,{backgroundColor:r.chords.popover.background,borderColor:r.chords.popover.border,children:[e.jsx(S,{backgroundColor:r.chords.popover.arrow}),e.jsx(T,{children:e.jsx(c,{gap:"5px",wrap:"wrap",children:o.chordIDs.map(s=>{const i=t[s];return console.assert(i!==void 0,`Could not find chord config for ${s}`),e.jsx(I,{size:["sm","md"],borderStyle:"solid",borderWidth:"thin",justifyContent:"center",backgroundColor:r.chords.popover.tag.background,borderColor:r.chords.popover.tag.border,color:r.chords.popover.tag.text,children:t[s].name},s)})})})]})]})})]})},a=B(),M=()=>{const{songsIndexPage:o}=u();l.useLayoutEffect(()=>z(o.background),[o.background]);const[r,x]=l.useState([]);return l.useEffect(()=>{fetch("/songs/index.json").then(t=>t.json()).then(t=>x(t.index)).catch(t=>{console.error("Failed to fetch songs index:",t)})},[]),e.jsx($,{maxW:["100vw","xl"],height:"100%",display:"flex",flexDirection:"column",padding:["1em 0em 0.2em 0em","1em"],borderRadius:["0em","0.5em"],background:o.background,children:e.jsxs(a.Wrapper,{context:a.context,setup:{data:r,getKey:t=>t.title+" "+t.artists.join(" ")},children:[e.jsx(c,{justifyContent:"center",mx:"auto",mb:"20px",width:["250px","300px","400px"],children:e.jsx(a.SearchBar,{useContext:a.context.use,backgroundColor:o.searchBar.background,color:o.searchBar.color,borderColor:o.searchBar.border,_focus:{borderColor:o.searchBar.focusBorder}})}),e.jsx(n,{flex:"1",overflowY:"scroll",sx:{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},children:e.jsx(a.Content,{virtualized:!0,useContext:a.context.use,render:(t,d)=>e.jsx(H,{index:d+1,...t},d)})})]})})};export{M as SongsIndexPage,M as default};
