const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Lyrics-DP5scebM.js","assets/chakra-xEmxteXZ.js","assets/react-Dawx916Q.js","assets/emotion-CmbqVCnl.js","assets/framer-motion-B1vkIGQC.js","assets/index-D-CKk56i.js","assets/index-CjdbcQIW.js","assets/index-BBhuzzo2.js","assets/index-BTOh0T1S.js"])))=>i.map(i=>d[i]);
import{u as e,A as r,g as s,h as t,i as o,a as i,G as n,j as c,e as l,_ as a,f as d,k as m}from"./index-D-CKk56i.js";import{j as h,H as x,p,J as g,F as j,B as u,o as b,I as y,O as f,k as w,P as v,s as S,v as C,w as k,a4 as z,a5 as I,x as L,r as $,K as T,h as _,y as D,n as P}from"./chakra-xEmxteXZ.js";import{C as F,a as A,b as E}from"./index-CIX9w_H2.js";import{r as O}from"./react-Dawx916Q.js";import"./emotion-CmbqVCnl.js";import"./framer-motion-B1vkIGQC.js";const R=i=>{const{chordsIndex:n,theme:c}=e(e=>({chordsIndex:e.chordsIndex,theme:e.appTheme.song}));return 1===i.chordIDs.length&&"-"===i.chordIDs[0]||0===i.chordIDs.length?null:h.jsxs(r,{defaultOpen:!0,children:[h.jsxs(s,{boxProps:{borderColor:c.items.divider,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[h.jsx(x,{as:"h3",size:"md",textDecoration:"underline",width:"100%",color:c.items.item.title,children:"Chords"}),h.jsx(t,{boxProps:{position:"absolute",right:"10px"},color:c.items.item.title})]}),h.jsx(o,{children:h.jsx(p,{display:"flex",gap:"10px",overflowX:"auto",padding:["1.1em 0em","1.1em 1em"],children:i.chordIDs.map(e=>{const r=n[e];return void 0===r?(console.error(`Missing chord config for ID ${e}`),null):h.jsx(g,{children:h.jsx(F,{...r,containerProps:{fontSize:["7px","8px","9px"]}})},e)})})})]})},W={acoustic:h.jsx(c,{}),electric:h.jsx(n,{})},V=e=>{const[r,s]=O.useState(!1),t=i(e=>e.appTheme.song);return h.jsxs(j,{direction:"column",alignItems:"center",mb:"15px",children:[h.jsxs(u,{position:"relative",width:["70px","80px"],height:["70px","80px"],mb:["5px"],children:[h.jsx(b,{isLoaded:r,width:"100%",height:"100%",borderRadius:"10px",children:h.jsx(y,{src:`/songs/${e.directory}/cover-192x192.webp`,srcSet:`\n              /songs/${e.directory}/cover-64x64.webp   64w,\n              /songs/${e.directory}/cover-128x128.webp 128w,\n              /songs/${e.directory}/cover-192x192.webp 192w`,alt:`${e.title} cover`,width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px",borderStyle:"solid",borderWidth:"thin",onLoad:()=>s(!0),borderColor:t.header.coverBorder})}),h.jsx(f,{position:"absolute",right:"0",top:"0",transform:"translate(50%, -50%)",size:"1em",padding:"15px",fontWeight:"bold",borderWidth:"thin",backgroundColor:t.capo.background,borderColor:t.capo.border,color:t.capo.text,children:h.jsxs(j,{alignItems:"end",children:[h.jsx(w,{fontSize:"sm",children:"C"}),h.jsx(w,{fontSize:"xs",children:e.capo})]})})]}),h.jsx(x,{noOfLines:1,as:"h1",size:["sm","md"],mb:["5px"],textAlign:"center",color:t.header.title,children:e.title}),h.jsx(x,{noOfLines:1,as:"h2",size:["xs","sm"],mb:["5px"],fontStyle:"italic",textAlign:"center",color:t.header.artists,children:e.artists.map((r,s)=>h.jsxs(O.Fragment,{children:[r," ",s<e.artists.length-1&&", "]},s))}),h.jsxs(v,{isLazy:!0,children:[h.jsx(S,{children:h.jsx(w,{as:"button",fontSize:"sm",mb:"10px",color:t.header.artists,_hover:{textDecoration:"underline",cursor:"pointer"},children:"Contributors"})}),h.jsxs(C,{overflow:"hidden",textAlign:"center",borderColor:t.header.contributors.border,children:[h.jsx(k,{backgroundColor:t.header.contributors.heading}),h.jsx(z,{color:t.header.contributors.title}),h.jsx(I,{fontWeight:"bold",borderBottom:"1px solid",backgroundColor:t.header.contributors.heading,color:t.header.contributors.title,children:"Song contributed by"}),h.jsx(L,{backgroundColor:t.header.contributors.content,color:t.header.contributors.contributor,children:e.contributors.length>0?e.contributors.map((r,s)=>h.jsx(w,{fontSize:"sm",mb:s<e.contributors.length-1?"2px":"0",children:r},s)):h.jsx(w,{fontSize:"sm",fontStyle:"italic",children:"No contributors"})})]})]}),h.jsx(j,{justifyContent:"center",color:t.header.typeTags,children:e.type.map((e,r)=>h.jsx(O.Fragment,{children:h.jsx($,{label:e,children:W[e]})},r))})]})},B=e=>{const r=i(e=>e.appTheme.song.buttons);return h.jsx(h.Fragment,{children:e.available&&h.jsx(u,{display:"flex",justifyContent:"center",mb:"1em",children:h.jsx(T,{size:"sm",onClick:e.onClick,colorScheme:e.lyricsShown?r.lyrics.bgHide:r.lyrics.bgShow,color:r.lyrics.text,children:e.lyricsShown?"Hide Lyrics":"Show Lyrics"})})})},G=e=>{const r=i(e=>e.appTheme.song);return h.jsx(_,{orientation:"vertical",height:["0px","auto"],width:["70%","0px"],borderWidth:"thin",mt:["15px","0px"],mb:["15px","0px"],ml:["auto","0px"],mr:["auto","0px"],borderColor:r.items.item.chordsPattern.divider,...e})},N=O.lazy(()=>a(()=>import("./Lyrics-DP5scebM.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.ChordsV1Lyrics}))),H=r=>{const{theme:s,settingsDisplaySectionTimes:t}=e(e=>({theme:e.appTheme.song,settingsDisplaySectionTimes:e.songSettings.display.sectionTimes}));return h.jsx(h.Fragment,{children:r.data.map((e,o)=>{const i=t&&e.times>1;return h.jsxs(O.Fragment,{children:[h.jsxs(u,{width:"100%",position:"relative",display:["box","flex"],gap:"1em",alignItems:"stretch",justifyContent:"center",fontSize:["0.85em","0.9em","1em"],maxWidth:"fit-content",border:"none",borderWidth:"thin",borderRight:[i?"1px solid red":"none","none"],paddingRight:[i?"1em":"0em","0em"],borderColor:s.items.item.chordsPattern.divider,children:[h.jsx(G,{display:["none","block"],borderStyle:["solid"]}),e.items.map((s,t)=>h.jsxs(O.Fragment,{children:[h.jsx(A,{items:s,strumms:r.strumms}),h.jsx(G,{borderStyle:["none","solid"],display:[t<e.items.length-(i?2:1)?"block":"none","block"]})]},t)),i&&h.jsx($,{label:`Repeat ${e.times} times`,borderColor:s.items.item.chordsPattern.divider,children:h.jsxs(w,{size:"sm",fontWeight:"bold",position:"absolute",top:"50%",right:"0",transform:"translate(150%, -50%)",zIndex:1,color:s.items.item.chordsPattern.chord.times.color,children:["x",e.times]})})]}),r.showLyrics&&h.jsx(O.Suspense,{fallback:h.jsx(l,{}),children:h.jsx(N,{visible:r.showLyrics,lyrics:r.lyrics})})]},o)})})},M=({name:e,frets:r})=>{const s=i(e=>e.appTheme.song);return h.jsxs(j,{align:"center",children:[h.jsx(u,{position:"sticky",left:"0",zIndex:5,backgroundColor:"blackAlpha.700",px:"1",fontWeight:"bold",color:s.items.item.stringsPattern.stringNames,fontFamily:"monospace",children:e}),h.jsx(w,{backgroundColor:"blackAlpha.200",fontFamily:"monospace",whiteSpace:"pre",color:s.items.item.stringsPattern.fret.text,children:r})]})},X=({chords:e})=>{const r=i(e=>e.appTheme.song),s=e.map((r,s)=>0===s?r.name:" ".repeat(r.offset-e[s-1].offset-e[s-1].name.length)+r.name).join("");return h.jsx(w,{ml:"3ch",fontFamily:"monospace",whiteSpace:"pre",color:r.items.item.stringsPattern.stringNames,children:s})},J=e=>{const r=i(e=>e.appTheme.song),{stringsToFrets:s,chords:t}=(e=>{const r={E:["|"],A:["|"],D:["|"],G:["|"],B:["|"],e:["|"]},s=[],t=Object.values(r);let o=0;return e.split(" ").map((e,i)=>{try{if("-"===e||"|"===e)return t.forEach(r=>r.push(e)),void(o+=1);if("["===e.charAt(0))return void s.push({name:e.slice(1,e.length-1),offset:o});let n,c=0;const l=new Set;e.split("+").map((s,t)=>{try{const e=r[s.charAt(0)];l.add(e);const t=s.slice(1);c=Math.max(c,t.length),e.push(t),n=e.length}catch(o){console.log(`item-${i}+${t}: "${e}" | "${s}"`),console.error(o)}}),void 0!==n&&(t.forEach(e=>{if(l.has(e)){const r=c-e[e.length-1].toString().length;r>0&&e.push("-".repeat(r))}else e.push("-".repeat(c))}),o+=c)}catch(n){console.log(`item-${i}: ${e}`),console.error(n)}}),t.forEach(e=>e.push("|")),{stringsToFrets:r,chords:s}})(e.data);return h.jsx(j,{direction:"column",width:"100%",overflowX:"auto",fontSize:["1.2em"],children:h.jsxs(u,{minWidth:"max-content",children:[t.length>0&&h.jsx(X,{chords:t}),h.jsx(M,{name:"e",frets:s.e}),h.jsx(M,{name:"B",frets:s.B}),h.jsx(M,{name:"G",frets:s.G}),h.jsx(M,{name:"D",frets:s.D}),h.jsx(M,{name:"A",frets:s.A}),h.jsx(M,{name:"E",frets:s.E}),h.jsx(_,{marginTop:"1em",borderColor:r.items.item.stringsPattern.divider})]})})},U=e=>{switch(e.entry.renderer){case"chords-v1":return h.jsx(H,{data:e.entry.data,strumms:e.strumms,showLyrics:e.showLyrics,lyrics:e.lyrics});case"chords-v2":return h.jsx(E,{data:e.entry.data,strummingPatterns:e.strumms,showLyrics:e.showLyrics,lyrics:e.lyrics});case"gtab-v1":return h.jsx(h.Fragment,{children:h.jsx(J,{data:e.entry.data})});default:return console.error(`Unimplemented chords type "${e.entry.renderer}`),h.jsx(u,{color:"red",backgroundColor:"black",padding:"0.25em 0.5em",borderRadius:"5px",cursor:"help",children:h.jsx($,{label:h.jsx(u,{as:"pre",whiteSpace:"pre-wrap",fontSize:"xs",maxW:"600px",children:JSON.stringify(e.entry,null,2)}),children:`[Configuration-Error] Unimplemented renderer type "${e.entry.renderer}"`})})}},K=e=>h.jsx(j,{direction:"column",alignItems:"center",gap:"1em",padding:["1.1em 0em","1.1em 1em"],overflowX:["auto","hidden"],children:h.jsx(U,{...e})}),Y=e=>{const n=i(e=>e.appTheme.song);return h.jsxs(r,{defaultOpen:!0,children:[h.jsxs(s,{boxProps:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",borderColor:n.items.divider},children:[h.jsx(x,{as:"h3",size:"md",textAlign:"center",textDecoration:"underline",textTransform:"capitalize",color:n.items.item.title,children:h.jsxs(w,{as:"span",position:"relative",fontSize:["lg","xl"],children:[e.name,e.times>1&&h.jsxs(D,{size:"sm",position:"absolute",bottom:0,right:0,transform:"translate(120%, 20%)",backgroundColor:n.items.item.times.background,color:n.items.item.times.color,children:["x",e.times]})]})}),h.jsx(t,{boxProps:{position:"absolute",right:"10px"},color:n.items.item.title})]}),h.jsx(o,{children:h.jsx(j,{direction:"column",gap:"0.25em",children:e.entries.map((r,s)=>h.jsx(K,{entry:r,strumms:e.strumms,showLyrics:e.showLyrics,lyrics:e.lyrics},s))})})]})},q=e=>h.jsx(h.Fragment,{children:e.order.map((r,s)=>{const t=e.sections[r];return console.assert(void 0!==t,`Failed to find song section data for "${r}"`),h.jsx(Y,{...t,strumms:e.strumms,showLyrics:e.showLyrics,lyrics:e.lyrics[s]},`${r}-${s}`)})}),Q=O.lazy(()=>a(()=>import("./index-CjdbcQIW.js"),__vite__mapDeps([6,1,2,3,4,5]))),Z=O.lazy(()=>a(()=>import("./index-BBhuzzo2.js"),__vite__mapDeps([7,1,2,3,4,5]))),ee=O.lazy(()=>a(()=>import("./index-BTOh0T1S.js"),__vite__mapDeps([8,2])).then(e=>({default:e.InView}))),re=e=>{const r=i(e=>e.appTheme.song),s=i(e=>e.appTheme.id),[t,o]=d(e.title+"-show-lyrics",!1),[n,c]=d(e.title+"-lyrics",[]);return h.jsxs(P,{maxW:["100vw","5xl"],padding:["25px 0px","2em 1em"],borderRadius:["0em","0.5em"],height:"100%",overflowY:"scroll",backgroundColor:r.background,children:[h.jsx(V,{directory:e.directory,title:e.title,artists:e.artists,capo:e.capo,type:e.type,contributors:e.contributors}),h.jsxs(u,{display:"flex",justifyContent:"center",mb:"1em",gap:"10px",children:[h.jsx(B,{available:e.lyrics,lyricsShown:t,onClick:()=>{o(!t),0===n.length&&m(`/songs/${e.directory}/lyrics.min.json.gz.bin`,`/songs/${e.directory}/lyrics.min.json`,`/songs/${e.directory}/lyrics.json`,e=>c(e.lyrics),e=>{console.error("Failed to fetch song lyrics:",e)})}}),h.jsx(T,{size:"sm",onClick:()=>{window.open(`/songs/${e.directory}/pdf/${e.directory}.${s}.pdf`,"_blank")},colorScheme:r.buttons.pdf.bg,color:r.buttons.pdf.text,children:"Open PDF"})]}),h.jsxs(u,{padding:["1.5rem 10px","1.5rem 1rem"],borderRadius:"1rem",backgroundColor:r.items.background,children:[h.jsx(R,{chordIDs:e.chordIDs}),h.jsx(q,{sections:e.sections,order:e.order,strumms:e.strumms,showLyrics:t&&n.length>0,lyrics:n})]}),e.notes.length>0&&h.jsx(O.Suspense,{fallback:h.jsx(l,{}),children:h.jsx(Q,{notes:e.notes})}),h.jsx(ee,{triggerOnce:!0,rootMargin:"300px",children:({inView:r,ref:s})=>h.jsx(O.Suspense,{fallback:h.jsx(l,{}),children:h.jsx(u,{ref:s,children:r?h.jsx(Z,{res:e.res}):null})})})]})};export{re as Song,re as default};
