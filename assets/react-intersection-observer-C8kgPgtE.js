import{r as e}from"./react-C2u2R5M2.js";var t=new Map,r=new WeakMap,n=0;function i(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(i=e.root,i?(r.has(i)||(n+=1,r.set(i,n.toString())),r.get(i)):"0"):e[t]}`;var i}).toString()}function o(e,r,n={},o=undefined){if(void 0===window.IntersectionObserver&&void 0!==o){const t=e.getBoundingClientRect();return r(o,{isIntersecting:o,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:t,intersectionRect:t,rootBounds:t}),()=>{}}const{id:s,observer:c,elements:u}=function(e){const r=i(e);let n=t.get(r);if(!n){const i=new Map;let o;const s=new IntersectionObserver(t=>{t.forEach(t=>{var r;const n=t.isIntersecting&&o.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(r=i.get(t.target))||r.forEach(e=>{e(n,t)})})},e);o=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:r,observer:s,elements:i},t.set(r,n)}return n}(n),a=u.get(e)||[];return u.has(e)||u.set(e,a),a.push(r),c.observe(e),function(){a.splice(a.indexOf(r),1),0===a.length&&(u.delete(e),c.unobserve(e)),0===u.size&&(c.disconnect(),t.delete(s))}}function s({threshold:t,delay:r,trackVisibility:n,rootMargin:i,root:s,triggerOnce:c,skip:u,initialInView:a,fallbackInView:l,onChange:d}={}){var h;const[f,g]=e.useState(null),v=e.useRef(d),y=e.useRef(a),[b,w]=e.useState({inView:!!a,entry:void 0});v.current=d,e.useEffect(()=>{if(void 0===y.current&&(y.current=a),u||!f)return;let e;return e=o(f,(t,r)=>{const n=y.current;y.current=t,(void 0!==n||t)&&(w({inView:t,entry:r}),v.current&&v.current(t,r),r.isIntersecting&&c&&e&&(e(),e=void 0))},{root:s,rootMargin:i,threshold:t,trackVisibility:n,delay:r},l),()=>{e&&e()}},[Array.isArray(t)?t.toString():t,f,s,i,c,u,n,l,r]);const V=null==(h=b.entry)?void 0:h.target,p=e.useRef(void 0);f||!V||c||u||p.current===V||(p.current=V,w({inView:!!a,entry:void 0}),y.current=a);const m=[g,b.inView,b.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}export{s as u};
